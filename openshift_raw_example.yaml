# host_vars/pvs.yml
---
storage: 5Gi
path: "/srv/nfs/user-vols/"
pvs: 
  - pv1
  - pv2
  - pv3


## This is what you'd do if Anisble 2.5 was available on the server
# playbook
- name: create-pvs-from-definitions
  tags: oc-raw
  vars_files:
    - host_vars/pvs.yml
  vars:
    guid: "{{ hostvars['localhost']['guid'].stdout }}"
  openshift_raw:
    state: present
    definition:
      apiVersion: v1
      kind: PersistentVolume
      metadata:
        name: "{{ item }}"
      spec: 
        capacity:
          storage: "{{ storage }}"
        accessModes:
        - ReadWriteOnce
        nfs:
          path: "{{ path }}{{ item }}"
          server: support1."{{ guid }}".internal
        persistentVolumeReclaimPolicy: Recycle
  with_items: "{{ pvs }}"